---
title: "Building a Reading Time Tracker [2]"
date: 2025-12-31
categories: [reading, tracking, shortcuts, calendar, r, rmarkdown]
description: "Logging reading sessions on IOS devices, exporting Calendar data, and analyzing and reporting data in Rmarkdown."
---

In this post, I’ll explore the data from the Reading Time Tracker I built in the previous post—specifically, how to export the calendar logs as an `.ics` file, import them into R, and do the analysis. 

## Exporting `.ics` from Calendar

I use **Google Calendar** as my main calendar, and I’ve imported it into **Apple Calendar** so my Google calendars are available inside **Shortcuts** (via Apple’s Calendar integration). For the reading tracker, I created a dedicated calendar called **Reading2026**, which the shortcut uses to store each reading session as an event.

In this section, I’ll walk through exporting the `.ics` file from both Apple Calendar and Google Calendar, and briefly explain why I ended up using the Google export for the analysis that follows.

### Exporting from Apple Calendar

Both Apple Calendar and Google Calendar let you export an entire calendar. In Apple Calendar, the exact UI varies slightly by macOS version, but the workflow is roughly the same:

1. Open the **Calendar** app on your Mac  
2. In the left sidebar, find and select the dedicated calendar (e.g., **Reading2026**)  
3. Use the top menu: **File → Export → Export…** to save that calendar as an `.ics` file  

### Export from Google Calendar 

Exporting an `.ics` file from Google Calendar is also straightforward:

1. Open **Google Calendar** in a browser  
2. In the left sidebar, hover over the calendar (e.g., **Reading2026**), click the **⋮** menu (or right-click) and choose **Settings and sharing**  
3. Scroll to **Export calendar** and download the `.ics` file  

### A small quirk: Apple vs. Google `.ics` data

After importing both `.ics` files into R, I noticed that the Apple Calendar `.ics` sometimes includes extra rows/fields that are harder to parse cleanly and can introduce edge-case issues. I looked into this issue briefly but couldn't find any documentation or discussions that explain what might have led to this issue.

In comparison, the Google Calendar data is cleaner. To keep the project moving, I’ll use the **Google Calendar** `.ics` file as the example dataset for the importing and analysis steps in the rest of this post.


## Importing `.ics` into R

Once you have an `.ics` file, the next step is turning it into a dataframe.

```{r importICS, echo=TRUE, eval=FALSE}

#####
#Load the packages needed for retreiving the data
#####

# Install the packages if they aren't yet
pkgs <- c("ical", "dplyr", "tibble")

missing <- pkgs[!pkgs %in% rownames(installed.packages())]
if (length(missing) > 0) {
  install.packages(missing, dependencies = TRUE)
}

invisible(lapply(pkgs, library, character.only = TRUE))

#####
# Point to .ics file 
#####
ics_path <- "ENTER YOUR ICS FILE PATH HERE"

#####
# Read .ics (VEVENT entries)
#####
ics_raw <- ical_parse_df(ics_path)

# Make it a tibble for nicer printing
reading_df <- as_tibble(ics_raw)

```



## What’s in the `.ics` Dataset 

```{r make-dummy-reading-df, message=FALSE, warning=FALSE, echo=FALSE, eval=FALSE}
# Dummy data similar to your reading_df (uid/summary/start/end/description/last.modified/status)

pkgs <- c("tibble", "dplyr")
missing <- pkgs[!pkgs %in% rownames(installed.packages())]
if (length(missing) > 0) install.packages(missing, dependencies = TRUE)
invisible(lapply(pkgs, library, character.only = TRUE))

set.seed(42)

n <- 120  # number of dummy sessions

# A small book list
books <- c(
  "Book1: The Story of A New Name",
  "Book2: The Kite Runner",
  "Book3: Project Hail Mary",
  "Book4: The Secret History",
  "Book5: Guns, Germs, and Steel"
)

# Generate random start times across 2025-01-01 to 2025-12-31 (US East)
start_range <- as.POSIXct("2025-01-01 06:00:00", tz = "America/New_York")
end_range   <- as.POSIXct("2025-12-31 23:00:00", tz = "America/New_York")

start_times <- as.POSIXct(
  runif(n, as.numeric(start_range), as.numeric(end_range)),
  origin = "1970-01-01", tz = "America/New_York"
)

# Random durations: 5 to 120 minutes
dur_min <- sample(5:120, n, replace = TRUE)
end_times <- start_times + dur_min * 60

# last.modified: a few seconds/minutes after end
last_modified <- end_times + sample(5:600, n, replace = TRUE)

# Create "UID-like" strings (not real UUID, but looks similar)
hex <- c(0:9, letters[1:6])
make_uid <- function() {
  paste0(
    paste(sample(hex, 8, TRUE), collapse=""), "-",
    paste(sample(hex, 4, TRUE), collapse=""), "-",
    paste(sample(hex, 4, TRUE), collapse=""), "-",
    paste(sample(hex, 4, TRUE), collapse=""), "-",
    paste(sample(hex, 12, TRUE), collapse="")
  ) |> toupper()
}
uids <- replicate(n, make_uid())

reading_df <- tibble(
  uid           = uids,
  summary       = sample(books, n, replace = TRUE),
  start         = start_times,
  end           = end_times,
  description   = NA,  # keep as logical NA to match your structure
  last.modified = last_modified,
  status        = "CONFIRMED"
) |>
  arrange(start)

# Show structure + peek
# str(reading_dummy)
# head(reading_dummy, 10)

# Save to project folder
saveRDS(reading_df, "data/reading_df.rds")

# confirm
file.info("data/reading_dummy.rds")[, c("size", "mtime")]


```

```{r loaddata, echo=FALSE}
reading_df <- readRDS(here::here("data", "reading_df.rds"))
```

Now let's take a look at what fields the calendar dataset provides.(I've created a [dummy dataset](data/reading_df.rds) for showcase purposes.)

::: {.scroll-container style="overflow-x: auto;white-space: nowrap;"}

```{r showdata, echo=TRUE}

#####
# Show a quick structure preview
#####
print(head(reading_df, 5))

```

::: 

Below is a quick summary of the fields.

- `uid` is the unique identifier the calendar application assigns to each event
- `summary` comes from the event title. Since I use the title to store the book name, this field effectively contains the book titles.  
- `start`is the start timestamp of the event.  
- `end`is the end timestamp of the event.  
- `description` is the event description. I haven't utilized this field yet, but I may use it later to log reading progress (e.g., page/percentage).  
- `last.modified`is the timestamp of the most recent edit to the event. Because there can be a small delay between tapping "Stop" in Shortcuts and the event being written into the calendar, this value often reflects when the event was created/saved (not necessarily the exact end time).  
- `status` indicates event status. Common values include `CONFIRMED`, `TENTATIVE`, `CANCELLED`. In my workflow, events created via Shortcuts show up as `CONFIRMED`.


## Hypotheses to Explore (What I’m Curious About)

Now that I understand what fields the calendar export provides, the next step is deciding what I want to learn—and what additional data (if any) would make the analysis more meaningful.

Below is a list of questions I’m interested in answering. Most of them come with implicit assumptions about my reading habits. By collecting my own data and analyse them, I can see which assumptions hold up and which don't. I also hope to find a few patterns that I didn't anticipate. That’s what I enjoy the most about a data-driven approach: it can surface patterns I wouldn’t notice otherwise, and it helps me check my own biases with something more concrete than memory.

As I worked through these questions, I also realized I’ll need a bit more data to answer them well:

- **Reading progress:** I’ll likely add a simple progress field to the tracker (e.g., percentage or pages) so I can study completion and drop-off points.
- **Book metadata:** I’ll pull basic metadata (e.g., genre, length/word count) from another source. I will document that process in a separate post.

### When do I read?

First, I want to know some basic, time-related stats. 

1. **Consistency:** Do I read regularly, or in bursts?
2. **Timing:** What times of day does reading naturally happen?
3. **Weekday vs weekend:** Does reading cluster on certain days?
4. **Seasonality:** Are there any month-to-month (or seasonal) shifts? 

### How do I move through books?

These focus on how I move through books. Some of these require basic book metadata (e.g., genre, length), which I’ll add later.

#### For books I finish

1. **Book overview:** How many books did I read, what genres were they, and how long did each one take?
2. **Focus vs. switching:** Do I tend to read one book at a time, or bounce between several?
3. **Pace by book:** How long does it typically take me to finish a book (total hours and number of sessions)?
4. **Engagement pattern:** Which books show many short sessions vs. fewer long sessions?
5. **Switching behavior:** If I switch books mid-stream, is it random—or does it happen after long gaps, short sessions, or late-night reading?
6. **Genre differences:** Do I read certain genres at different times of day or in different session lengths?

#### For books I don't finish

1. **Abandonment point:** How far do I typically get before stopping? 
2. **The “fade-out” signal:** Do unfinished books show a common pattern before I drop them (shrinking session length, longer gaps, switching to other books)?

### What predicts momentum?

1. **What predicts “stickiness":** What factors correlate with steady progress—time of day, session length, weekday/weekend, or genre?
2. **Completion likelihood:** Are some genres more likely to be finished vs. abandoned?


<hr>

<p>This work is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC" style="max-width: 1em;max-height:1em;margin-left: .2em;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="BY" style="max-width: 1em;max-height:1em;margin-left: .2em;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt="SA" style="max-width: 1em;max-height:1em;margin-left: .2em;"/></p>