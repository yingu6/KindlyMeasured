<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Kindly Measured</title>
<link>https://yingu6.github.io/KindlyMeasured/posts.html</link>
<atom:link href="https://yingu6.github.io/KindlyMeasured/posts.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.7.32</generator>
<lastBuildDate>Wed, 31 Dec 2025 05:00:00 GMT</lastBuildDate>
<item>
  <title>Kindly Measured Reading [2/3]: The Data</title>
  <link>https://yingu6.github.io/KindlyMeasured/posts/ReadingTracker2.html</link>
  <description><![CDATA[ 





<p>In the previous post, I talked about how I built a lightweight <strong>Reading Time Tracker</strong> (Shortcuts → Calendar) so each reading session gets logged automatically.</p>
<p>In this post, I’ll walk through how to export calendar events as an <code>.ics</code> file, export your Goodreads library as a <code>.csv</code>, and then import and review both in R. The goal is to end up with a clean, analysis-ready dataset where:</p>
<ul>
<li>the <strong>Calendar data</strong> tells me <em>when</em> I read (session-level start/end times)</li>
<li>the <strong>Goodreads data</strong> tells me <em>what</em> I read (book-level metadata like author/ISBN/shelf/ratings)</li>
</ul>
<p>Along the way, I’ll point out what each source includes (and what it doesn’t), and show a few simple, general cleaning steps needed to line up book titles across the two exports. In the following post, I’ll use the cleaned, merged dataset to summarize and visualize reading time patterns.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
At a glance
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Export Calendar <code>.ics</code> and import into R</li>
<li>Export Goodreads <code>.csv</code> and import into R</li>
<li>Data prep</li>
<li>Merge into one complete dataset</li>
<li>Filter by a time window (month / quarter / year)</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Downloadable files
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you’d like to follow along, here are the files used in this post:</p>
<ul>
<li><p>Sample calendar dataset: <code>calendar_df.rds</code><br>
<a href="data/calendar_df.rds">Download</a></p></li>
<li><p>Sample Goodreads dataset: <code>goodreads_df.rds</code><br>
<a href="data/goodreads_df.rds">Download</a></p></li>
</ul>
</div>
</div>
<section id="exporting-.ics-from-calendar" class="level2">
<h2 class="anchored" data-anchor-id="exporting-.ics-from-calendar">Exporting <code>.ics</code> from Calendar</h2>
<p>I use <strong>Google Calendar</strong> as my main calendar, and I’ve imported it into <strong>Apple Calendar</strong> so my Google calendars are available inside <strong>Shortcuts</strong> (via Apple’s Calendar integration). For the reading tracker, I created a dedicated calendar called <strong>Reading2026</strong>, which the shortcut uses to store each reading session as an event.</p>
<p>In this section, I’ll walk through exporting the <code>.ics</code> file from both Apple Calendar and Google Calendar, and briefly explain why I ended up using the Google export for the analysis that follows.</p>
<section id="exporting-from-apple-calendar" class="level3">
<h3 class="anchored" data-anchor-id="exporting-from-apple-calendar">Exporting from Apple Calendar</h3>
<p>Both Apple Calendar and Google Calendar let you export an entire calendar. In Apple Calendar, the exact UI varies slightly by macOS version, but the workflow is roughly the same:</p>
<ol type="1">
<li>Open the <strong>Calendar</strong> app on your Mac<br>
</li>
<li>In the left sidebar, find and select the dedicated calendar (e.g., <strong>Reading2026</strong>)<br>
</li>
<li>Use the top menu: <strong>File → Export → Export…</strong> to save that calendar as an <code>.ics</code> file</li>
</ol>
</section>
<section id="export-from-google-calendar" class="level3">
<h3 class="anchored" data-anchor-id="export-from-google-calendar">Export from Google Calendar</h3>
<p>Exporting an <code>.ics</code> file from Google Calendar is also straightforward:</p>
<ol type="1">
<li>Open <strong>Google Calendar</strong> in a browser<br>
</li>
<li>In the left sidebar, hover over the calendar (e.g., <strong>Reading2026</strong>), click the <strong>⋮</strong> menu (or right-click) and choose <strong>Settings and sharing</strong><br>
</li>
<li>Scroll to <strong>Export calendar</strong> and download the <code>.ics</code> file</li>
</ol>
</section>
<section id="a-small-quirk-apple-vs.-google-.ics-data" class="level3">
<h3 class="anchored" data-anchor-id="a-small-quirk-apple-vs.-google-.ics-data">A small quirk: Apple vs.&nbsp;Google <code>.ics</code> data</h3>
<p>After importing both <code>.ics</code> files into R, I noticed that the Apple Calendar <code>.ics</code> sometimes includes extra rows/fields that are harder to parse cleanly and can introduce edge-case issues. I looked into this issue briefly but couldn’t find any documentation or discussions that explain what might have led to this issue.</p>
<p>In my case, the Google Calendar export was easier to work with. To keep things simple, I’ll use the Google Calendar <code>.ics</code> file as the example dataset for the importing and analysis steps in the rest of this post.</p>
</section>
</section>
<section id="importing-.ics-into-r" class="level2">
<h2 class="anchored" data-anchor-id="importing-.ics-into-r">Importing <code>.ics</code> into R</h2>
<p>Once you have an <code>.ics</code> file, the next step is turning it into a dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Load the packages needed for retrieving the data</span></span>
<span id="cb1-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install the packages if they aren't yet</span></span>
<span id="cb1-6">pkgs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ical"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tibble"</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8">missing <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pkgs[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>pkgs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">installed.packages</span>())]</span>
<span id="cb1-9"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(missing) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(missing, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dependencies =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb1-11">}</span>
<span id="cb1-12"></span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">invisible</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(pkgs, library, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">character.only =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Point to .ics file </span></span>
<span id="cb1-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-18">ics_path <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ENTER YOUR ICS FILE PATH HERE"</span></span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Read .ics file</span></span>
<span id="cb1-22"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb1-23">ics_raw <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ical_parse_df</span>(ics_path)</span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make it a tibble for nicer printing</span></span>
<span id="cb1-26">calendar_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>(ics_raw)</span></code></pre></div>
</div>
</section>
<section id="whats-in-the-calendar-dataset" class="level2">
<h2 class="anchored" data-anchor-id="whats-in-the-calendar-dataset">What’s in the Calendar Dataset</h2>
<p>Now let’s take a look at what fields the calendar dataset provides. I’ve created a sample <a href="data/calendar_df.rds">calendar dataset</a>, called <code>calendar_df</code>, if you’d like to follow along.</p>
<div class="scroll-container" style="overflow-x: scroll;white-space: nowrap;">
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Show the first 10 rows of the dataset</span></span>
<span id="cb2-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb2-4">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(calendar_df, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 25%">
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 13%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">summary</th>
<th style="text-align: left;">start</th>
<th style="text-align: left;">end</th>
<th style="text-align: left;">description</th>
<th style="text-align: left;">last.modified</th>
<th style="text-align: left;">status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">9C8E9A43-EDEF-D832-7083-4A23A1628CD3</td>
<td style="text-align: left;">Project Hail Mary</td>
<td style="text-align: left;">2025-01-01 08:05:27</td>
<td style="text-align: left;">2025-01-01 08:23:27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 08:27:03</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="even">
<td style="text-align: left;">C3122372-3996-DC8D-C0AC-A2DB79FBA943</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-01 18:05:11</td>
<td style="text-align: left;">2025-01-01 19:44:11</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 19:49:19</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="odd">
<td style="text-align: left;">695A52D8-00B3-7D86-FF46-CD81A8F2095C</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">2025-01-01 19:44:49</td>
<td style="text-align: left;">2025-01-01 20:20:49</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 20:27:12</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="even">
<td style="text-align: left;">4AFA90C7-C9D4-754D-A4FD-B8F1C3CA23AB</td>
<td style="text-align: left;">Guns, Germs, and Steel</td>
<td style="text-align: left;">2025-01-02 01:53:42</td>
<td style="text-align: left;">2025-01-02 03:21:42</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-02 03:24:40</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C490962D-97B1-59E4-7BE9-50B6C8DB16FB</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-02 16:33:35</td>
<td style="text-align: left;">2025-01-02 17:58:35</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-02 18:00:58</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADA0D938-47D5-A425-7F70-B977B7486DEE</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-03 22:11:44</td>
<td style="text-align: left;">2025-01-03 22:29:44</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-03 22:34:22</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="odd">
<td style="text-align: left;">010627B9-8BE5-3E1C-661B-E22B65DEDBB8</td>
<td style="text-align: left;">The Story of A New Name</td>
<td style="text-align: left;">2025-01-04 03:00:54</td>
<td style="text-align: left;">2025-01-04 03:38:54</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-04 03:43:38</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="even">
<td style="text-align: left;">032626A0-2265-D055-D033-78363E96CEDF</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-14 21:38:01</td>
<td style="text-align: left;">2025-01-14 22:19:01</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-14 22:22:14</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A58BA23E-669F-199D-B3CB-9330E6BB386B</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">2025-01-15 10:48:39</td>
<td style="text-align: left;">2025-01-15 12:27:39</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-15 12:34:49</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
<tr class="even">
<td style="text-align: left;">306BC9B4-BA07-7FD6-A2D4-0C68C60D6620</td>
<td style="text-align: left;">Guns, Germs, and Steel</td>
<td style="text-align: left;">2025-01-16 22:16:51</td>
<td style="text-align: left;">2025-01-16 22:45:51</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-16 22:48:38</td>
<td style="text-align: left;">CONFIRMED</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Below is a quick summary of the fields.</p>
<ul>
<li><code>uid</code> is the unique identifier the calendar application assigns to each event</li>
<li><code>summary</code> comes from the event title. Since I use the title to store the book name, this field effectively contains the book titles.<br>
</li>
<li><code>start</code>is the start timestamp of the event.<br>
</li>
<li><code>end</code>is the end timestamp of the event.<br>
</li>
<li><code>description</code> is the event description. I haven’t utilized this field yet, but I may use it later to log reading progress (e.g., page/percentage).<br>
</li>
<li><code>last.modified</code>is the timestamp of the most recent edit to the event. Because there can be a small delay between tapping “Stop” in Shortcuts and the event being written into the calendar, this value often reflects when the event was created/saved (not necessarily the exact end time).<br>
</li>
<li><code>status</code> indicates event status. Common values include <code>CONFIRMED</code>, <code>TENTATIVE</code>, <code>CANCELLED</code>. In my workflow, events created via Shortcuts show up as <code>CONFIRMED</code>.</li>
</ul>
</section>
<section id="exporting-library-data-.csv-from-goodreads" class="level2">
<h2 class="anchored" data-anchor-id="exporting-library-data-.csv-from-goodreads">Exporting Library Data (<code>.csv</code>) from Goodreads</h2>
<p>Goodreads lets readers export their entire library (including information such as book titles, ISBN, shelves/status, ratings, and reading dates) as a <code>.csv</code> file. This ends up being a convenient companion dataset to the Calendar dataset: Calendar tells me when I read, and Goodreads describe further what I read and whether I finished it.</p>
<p>Here’s how to export the file:</p>
<ol type="1">
<li>Open <a href="https://www.goodreads.com/"><strong>Goodreads</strong></a> in a browser</li>
<li>On the <strong>My Books</strong> page, look for <strong>Tools</strong> in the left sidebar</li>
<li>Click <strong>Import and export</strong></li>
<li>Under <strong>Export</strong>, click <strong>Export Library</strong>. Goodreads will generate the file in the background and generate a link called “Your export from [date] - [time]” below the Export Library button.</li>
<li>Refresh the page and download the <code>.csv</code> file.</li>
</ol>
<p>For file management purposes, I usually rename the file, like <code>goodreads_library_export_20251231.csv</code>, so it’s time-stamped.</p>
</section>
<section id="importing-library-data-into-r" class="level2">
<h2 class="anchored" data-anchor-id="importing-library-data-into-r">Importing Library Data into R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##### </span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Load the packages needed for retreiving the data </span></span>
<span id="cb3-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install the packages if they aren't yet</span></span>
<span id="cb3-6"></span>
<span id="cb3-7">pkgs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"readr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stringr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"janitor"</span>)</span>
<span id="cb3-8"></span>
<span id="cb3-9">missing <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pkgs[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>pkgs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">installed.packages</span>())]</span>
<span id="cb3-10"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(missing) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(missing, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dependencies =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb3-12">}</span>
<span id="cb3-13"></span>
<span id="cb3-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">invisible</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(pkgs, library, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">character.only =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb3-15"></span>
<span id="cb3-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##### </span></span>
<span id="cb3-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Point to Goodreads file</span></span>
<span id="cb3-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##### </span></span>
<span id="cb3-19"></span>
<span id="cb3-20">goodreads_path <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ENTER YOUR CSV FILE PATH HERE"</span></span>
<span id="cb3-21"></span>
<span id="cb3-22"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb3-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Read .csv file</span></span>
<span id="cb3-24"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb3-25">goodreads_raw <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(goodreads_path, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show_col_types =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb3-26"></span>
<span id="cb3-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make it a tibble for nicer printing</span></span>
<span id="cb3-28">goodreads_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>(goodreads_raw)</span></code></pre></div>
</div>
</section>
<section id="whats-in-the-goodreads-dataset" class="level2">
<h2 class="anchored" data-anchor-id="whats-in-the-goodreads-dataset">What’s in the Goodreads Dataset</h2>
<p>Similarly, I’ve created a sample <a href="data/goodreads_df.rds">Goodreads library dataset</a>, called <code>goodreads_df</code>, so we can explore it together.</p>
<p>Before we dive in, we’ll clean the column names. Goodreads uses spaces and title case (e.g., <code>Book Id</code>, <code>Date Read</code>), so I convert them to snake_case (e.g., <code>book_id</code>, <code>date_read</code>) to make the rest of the code easier to read.</p>
<p>Goodreads also stores dates as strings (often like <code>YYYY/MM/DD</code>). I’ll convert them into proper Date values <code>YYYY-MM-DD</code> so they’re easier to filter and summarize later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">goodreads_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> goodreads_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-2">  janitor<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_names</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb4-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_read  =</span> lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd</span>(stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(date_read, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)),</span>
<span id="cb4-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_added =</span> lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd</span>(stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(date_added, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>))</span>
<span id="cb4-6">  )</span></code></pre></div>
</div>
<p>Now, let’s take a look at the fields the Goodreads dataset <code>goodreads_df</code> provides:</p>
<div class="scroll-container" style="overflow-x: scroll;white-space: nowrap;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb5-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Show the first 10 rows of the dataset</span></span>
<span id="cb5-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb5-4">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(goodreads_df, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 17%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">book_id</th>
<th style="text-align: left;">title</th>
<th style="text-align: left;">author</th>
<th style="text-align: left;">author_l_f</th>
<th style="text-align: left;">additional_authors</th>
<th style="text-align: left;">isbn</th>
<th style="text-align: left;">isbn13</th>
<th style="text-align: right;">my_rating</th>
<th style="text-align: right;">average_rating</th>
<th style="text-align: left;">publisher</th>
<th style="text-align: left;">binding</th>
<th style="text-align: right;">number_of_pages</th>
<th style="text-align: right;">year_published</th>
<th style="text-align: right;">original_publication_year</th>
<th style="text-align: left;">date_read</th>
<th style="text-align: left;">date_added</th>
<th style="text-align: left;">bookshelves</th>
<th style="text-align: left;">bookshelves_with_positions</th>
<th style="text-align: left;">exclusive_shelf</th>
<th style="text-align: left;">my_review</th>
<th style="text-align: left;">spoiler</th>
<th style="text-align: left;">private_notes</th>
<th style="text-align: right;">read_count</th>
<th style="text-align: right;">owned_copies</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">900001</td>
<td style="text-align: left;">The Story of a New Name (Neapolitan Novels, #2)</td>
<td style="text-align: left;">Elena Ferrante</td>
<td style="text-align: left;">Ferrante, Elena</td>
<td style="text-align: left;">Ann Goldstein</td>
<td style="text-align: left;">=“1609450786”</td>
<td style="text-align: left;">=“9781609450786”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.46</td>
<td style="text-align: left;">Europa Editions</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">471</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">2012</td>
<td style="text-align: left;">2025-02-18</td>
<td style="text-align: left;">2024-12-30</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">900002</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">Khaled Hosseini</td>
<td style="text-align: left;">Hosseini, Khaled</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“159463193X”</td>
<td style="text-align: left;">=“9781594631931”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.32</td>
<td style="text-align: left;">Riverhead Books</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">371</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">2003</td>
<td style="text-align: left;">2025-07-10</td>
<td style="text-align: left;">2024-12-29</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900003</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">Khaled Hosseini</td>
<td style="text-align: left;">Hosseini, Khaled</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“159463193X”</td>
<td style="text-align: left;">=“9781594631931”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.32</td>
<td style="text-align: left;">Riverhead Books</td>
<td style="text-align: left;">Kindle Edition</td>
<td style="text-align: right;">371</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">2003</td>
<td style="text-align: left;">2025-07-10</td>
<td style="text-align: left;">2024-12-29</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">900004</td>
<td style="text-align: left;">Project Hail Mary (Hardcover)</td>
<td style="text-align: left;">Andy Weir</td>
<td style="text-align: left;">Weir, Andy</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0593135202”</td>
<td style="text-align: left;">=“9780593135204”</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.51</td>
<td style="text-align: left;">Ballantine Books</td>
<td style="text-align: left;">Hardcover</td>
<td style="text-align: right;">496</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">2021</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-20</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900005</td>
<td style="text-align: left;">Project Hail Mary (Paperback)</td>
<td style="text-align: left;">Andy Weir</td>
<td style="text-align: left;">Weir, Andy</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0593135202”</td>
<td style="text-align: left;">=“9780593135204”</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.51</td>
<td style="text-align: left;">Ballantine Books</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">496</td>
<td style="text-align: right;">2022</td>
<td style="text-align: right;">2021</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-20</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">Tartt, Donna</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“1400031702”</td>
<td style="text-align: left;">=“9781400031702”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: left;">Vintage</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">1992</td>
<td style="text-align: left;">2025-01-03</td>
<td style="text-align: left;">2024-12-15</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900007</td>
<td style="text-align: left;">Guns, Germs, and Steel: The Fates of Human Societies</td>
<td style="text-align: left;">Jared Diamond</td>
<td style="text-align: left;">Diamond, Jared</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0393317552”</td>
<td style="text-align: left;">=“9780393317558”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: left;">W. W. Norton &amp; Company</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">528</td>
<td style="text-align: right;">1997</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">2025-11-20</td>
<td style="text-align: left;">2022-10-01</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">900008</td>
<td style="text-align: left;">Small Things Like These: A Novel</td>
<td style="text-align: left;">Claire Keegan</td>
<td style="text-align: left;">Keegan, Claire</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0802158749”</td>
<td style="text-align: left;">=“9780802158741”</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.09</td>
<td style="text-align: left;">Grove Press</td>
<td style="text-align: left;">Hardcover</td>
<td style="text-align: right;">128</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">2021</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2023-12-29</td>
<td style="text-align: left;">to-read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">to-read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900009</td>
<td style="text-align: left;">Atomic Habits: An Easy &amp; Proven Way to Build Good Habits &amp; Break Bad Ones</td>
<td style="text-align: left;">James Clear</td>
<td style="text-align: left;">Clear, James</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0735211299”</td>
<td style="text-align: left;">=“9780735211292”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: left;">Avery</td>
<td style="text-align: left;">Hardcover</td>
<td style="text-align: right;">320</td>
<td style="text-align: right;">2018</td>
<td style="text-align: right;">2018</td>
<td style="text-align: left;">2023-01-15</td>
<td style="text-align: left;">2022-12-30</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">900010</td>
<td style="text-align: left;">Educated: A Memoir (Reese’s Book Club)</td>
<td style="text-align: left;">Tara Westover</td>
<td style="text-align: left;">Westover, Tara</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0399590501”</td>
<td style="text-align: left;">=“9780399590504”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.47</td>
<td style="text-align: left;">Random House</td>
<td style="text-align: left;">Hardcover</td>
<td style="text-align: right;">352</td>
<td style="text-align: right;">2018</td>
<td style="text-align: right;">2018</td>
<td style="text-align: left;">2022-06-05</td>
<td style="text-align: left;">2022-01-10</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Goodreads exports a fairly wide library table.</p>
<ul>
<li><code>Book Id</code> — Goodreads’ unique ID for this specific library entry</li>
<li><code>Title</code> — Book title as listed in Goodreads</li>
<li><code>Author</code> — Primary author name.</li>
<li><code>Author l-f</code> — Author name in “Last, First” format</li>
<li><code>Additional Authors</code> — Co-authors, translators, editors, etc. (when applicable)</li>
<li><code>ISBN</code> — 10-digit ISBN for the edition</li>
<li><code>ISBN13</code> — 13-digit ISBN for the edition</li>
<li><code>My Rating</code> — Your personal rating (blank if you didn’t rate it)</li>
<li><code>Average Rating</code> — Goodreads community average rating</li>
<li><code>Publisher</code> — Publisher of the specific edition in the export</li>
<li><code>Binding</code> — Format of the edition (e.g., hardcover, paperback, Kindle)</li>
<li><code>Number of Pages</code> — Page count for that edition.</li>
<li><code>Year Published</code> — Publication year for that edition (can differ across editions)</li>
<li><code>Original Publication Year</code> — First publication year of the work</li>
<li><code>Date Read</code> — Date you marked the book as finished (blank if not finished).</li>
<li><code>Date Added</code> — Date you added the book to your Goodreads library.</li>
<li><code>Bookshelves</code> — All shelves/tags you assigned (can include multiple, comma-separated).</li>
<li><code>Bookshelves with positions</code> — Shelf ordering/position metadata (useful if you use shelf ranking).</li>
<li><code>Exclusive Shelf</code> — The primary status shelf (typically one of <code>read</code>, <code>currently-reading</code>, <code>to-read</code>).</li>
<li><code>My Review</code> — Your written review text (if any).</li>
<li><code>Spoiler</code> — Indicates whether your review is marked as containing spoilers.</li>
<li><code>Private Notes</code> — Your private notes (not public; may be blank if unused).</li>
<li><code>Read Count</code> — How many times you’ve marked the book as read.</li>
<li><code>Owned Copies</code> — Number of copies you own (if you track ownership).</li>
</ul>
<p>Before we dive into any analysis, let’s do a quick sanity check: are there any books with missing titles, or any duplicate entries in the library data?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check for missing + duplicated titles (summary only)</span></span>
<span id="cb6-2"></span>
<span id="cb6-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(goodreads_df)) {</span>
<span id="cb6-4"></span>
<span id="cb6-5">  title_check <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> goodreads_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-6">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb6-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_raw =</span> title,</span>
<span id="cb6-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_is_missing =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(title_raw) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_squish</span>(title_raw) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb6-9">    )</span>
<span id="cb6-10"></span>
<span id="cb6-11">  missing_n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(title_check<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title_is_missing)</span>
<span id="cb6-12">  unique_n  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n_distinct</span>(title_check<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title_raw[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>title_check<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title_is_missing])</span>
<span id="cb6-13"></span>
<span id="cb6-14">  dup_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> title_check <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-15">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>title_is_missing) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-16">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(title_raw, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-17">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-18">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb6-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_duplicated_titles =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># how many titles appear more than once</span></span>
<span id="cb6-20">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_duplicate_rows    =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extra rows beyond the first copy</span></span>
<span id="cb6-21">    )</span>
<span id="cb6-22"></span>
<span id="cb6-23">  n_dup_titles <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dup_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n_duplicated_titles</span>
<span id="cb6-24">  n_dup_rows   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dup_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n_duplicate_rows</span>
<span id="cb6-25"></span>
<span id="cb6-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(glue<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glue</span>(</span>
<span id="cb6-27">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing titles: {missing_n}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb6-28">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Unique (non-missing) titles: {unique_n}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb6-29">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Titles with duplicates: {n_dup_titles}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb6-30">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Extra duplicate rows: {n_dup_rows}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb6-31">  ))</span>
<span id="cb6-32"></span>
<span id="cb6-33">} </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Missing titles: 0
Unique (non-missing) titles: 13
Titles with duplicates: 1
Extra duplicate rows: 1</code></pre>
</div>
</div>
<p>Now that we have a clearer picture of what’s in the dataset, we can start cleaning the data.</p>
</section>
<section id="cleaning-the-goodreads-dataset---prep-work" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-the-goodreads-dataset---prep-work">Cleaning the Goodreads Dataset - Prep work</h2>
<p>As usual, we will first load a few packages we’ll use throughout the cleaning + matching process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Packages (install if missing)</span></span>
<span id="cb8-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb8-4">pkgs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stringr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lubridate"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tibble"</span>)</span>
<span id="cb8-5">missing <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pkgs[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>pkgs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">installed.packages</span>())]</span>
<span id="cb8-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(missing) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(missing, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dependencies =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">invisible</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(pkgs, library, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">character.only =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span></code></pre></div>
</div>
<section id="clean-book-titles-into-a-consistent-format" class="level3">
<h3 class="anchored" data-anchor-id="clean-book-titles-into-a-consistent-format">Clean book titles into a consistent format</h3>
<p>A very common issue is that the <em>same</em> book title can be written slightly differently across datasets. For example, the Goodreads export may include extra edition or series text:</p>
<ul>
<li><code>Project Hail Mary (Hardcover)</code></li>
<li><code>My Brilliant Friend (Neapolitan Novels, #1)</code></li>
</ul>
<p>But, in the calendar tracker, I usually type a shorter name like <code>Project Hail Mary</code> and <code>My Brilliant Friend</code>.</p>
<p>To make matching easier, we’ll create a minimal title-cleaning function. I’m keeping it intentionally simple so it’s easy to adapt.</p>
<p>Rules: - lower case - remove trailing parenthetical info like <code>(Hardcover)</code> or <code>(Neapolitan Novels, #2)</code> - remove punctuation - squish extra spaces</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb9-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Helper: minimal book title normalizer</span></span>
<span id="cb9-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#####</span></span>
<span id="cb9-4"></span>
<span id="cb9-5">clean_title <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x) {</span>
<span id="cb9-6">  x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove trailing parenthetical at the end of the title</span></span>
<span id="cb9-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s*</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">(.*?</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s*$"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove punctuation/symbols</span></span>
<span id="cb9-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[^a-z0-9</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s]"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># collapse multiple spaces</span></span>
<span id="cb9-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_squish</span>()</span>
<span id="cb9-14">}</span></code></pre></div>
</div>
<p>We’ll add <code>title_clean</code>, which we’ll use for both: - duplicate detection - title matching</p>
<div class="scroll-container" style="overflow-x: scroll;white-space: nowrap;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">goodreads_prepped <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> goodreads_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_clean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_title</span>(title))</span>
<span id="cb10-3"></span>
<span id="cb10-4">goodreads_prepped <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(book_id, title, title_clean, author, exclusive_shelf, date_read) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-7">  knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 37%">
<col style="width: 35%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">book_id</th>
<th style="text-align: left;">title</th>
<th style="text-align: left;">title_clean</th>
<th style="text-align: left;">author</th>
<th style="text-align: left;">exclusive_shelf</th>
<th style="text-align: left;">date_read</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">900001</td>
<td style="text-align: left;">The Story of a New Name (Neapolitan Novels, #2)</td>
<td style="text-align: left;">the story of a new name</td>
<td style="text-align: left;">Elena Ferrante</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2025-02-18</td>
</tr>
<tr class="even">
<td style="text-align: right;">900002</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">the kite runner</td>
<td style="text-align: left;">Khaled Hosseini</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2025-07-10</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900003</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">the kite runner</td>
<td style="text-align: left;">Khaled Hosseini</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2025-07-10</td>
</tr>
<tr class="even">
<td style="text-align: right;">900004</td>
<td style="text-align: left;">Project Hail Mary (Hardcover)</td>
<td style="text-align: left;">project hail mary</td>
<td style="text-align: left;">Andy Weir</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900005</td>
<td style="text-align: left;">Project Hail Mary (Paperback)</td>
<td style="text-align: left;">project hail mary</td>
<td style="text-align: left;">Andy Weir</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">the secret history</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2025-01-03</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900007</td>
<td style="text-align: left;">Guns, Germs, and Steel: The Fates of Human Societies</td>
<td style="text-align: left;">guns germs and steel the fates of human societies</td>
<td style="text-align: left;">Jared Diamond</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2025-11-20</td>
</tr>
<tr class="even">
<td style="text-align: right;">900008</td>
<td style="text-align: left;">Small Things Like These: A Novel</td>
<td style="text-align: left;">small things like these a novel</td>
<td style="text-align: left;">Claire Keegan</td>
<td style="text-align: left;">to-read</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">900009</td>
<td style="text-align: left;">Atomic Habits: An Easy &amp; Proven Way to Build Good Habits &amp; Break Bad Ones</td>
<td style="text-align: left;">atomic habits an easy proven way to build good habits break bad ones</td>
<td style="text-align: left;">James Clear</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2023-01-15</td>
</tr>
<tr class="even">
<td style="text-align: right;">900010</td>
<td style="text-align: left;">Educated: A Memoir (Reese’s Book Club)</td>
<td style="text-align: left;">educated a memoir</td>
<td style="text-align: left;">Tara Westover</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">2022-06-05</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="spot-duplicates-in-the-goodreads-dataset" class="level3">
<h3 class="anchored" data-anchor-id="spot-duplicates-in-the-goodreads-dataset">Spot duplicates in the Goodreads Dataset</h3>
<p>Another common issue: the Goodreads library export can contain <strong>duplicate entries</strong> for the “same” book. This often happens when you accidentally add multiple editions (hardcover vs paperback, different publishers, etc.).</p>
<p>Here’s a simple rule of thumb:</p>
<p>If two rows share the same <strong>cleaned title</strong> <em>and</em> <strong>author</strong>, we treat them as a duplicate candidate set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">####</span></span>
<span id="cb11-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Helper: identify potential duplicates in Goodreads</span></span>
<span id="cb11-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">####</span></span>
<span id="cb11-4"></span>
<span id="cb11-5">find_goodreads_dupes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(gr) {</span>
<span id="cb11-6">  gr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(title_clean, author) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(title_clean, author, book_id)</span>
<span id="cb11-11">}</span></code></pre></div>
</div>
<p>Because duplicates can happen for different reasons, I recommend reviewing them one by one before deleting anything.</p>
<p>The following process is to 1) <strong>detect</strong> duplicates 2) <strong>print</strong> them 3) <strong>manually decide</strong> which <code>book_id</code> to remove</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">gr_dupes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find_goodreads_dupes</span>(goodreads_prepped)</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=== Candidate duplicates in Goodreads (same cleaned title + author) ===</span></span>
<span id="cb12-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb12-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(gr_dupes) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No duplicates detected.</span></span>
<span id="cb12-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb12-8">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb12-9">  gr_dupes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(book_id, title, author, isbn, isbn13, number_of_pages, date_read, date_added, exclusive_shelf)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-11">    knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>()</span>
<span id="cb12-12">  </span>
<span id="cb12-13">}</span></code></pre></div>
</div>
<p>After you review the printed table above, choose which IDs you want to remove.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">drop_book_ids <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb13-2">   <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">900003</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">900005</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#[replace with the IDs you want to remove]</span></span>
<span id="cb13-3">)</span>
<span id="cb13-4"></span>
<span id="cb13-5">goodreads_dedup <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> goodreads_prepped <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>book_id <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> drop_book_ids)</span>
<span id="cb13-7"></span>
<span id="cb13-8">dupes_left <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> goodreads_dedup <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(title_clean, author, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb13-11"></span>
<span id="cb13-12"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(dupes_left) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb13-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No duplicate candidates remain after de-duplication."</span>)</span>
<span id="cb13-14">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb13-15">  knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(dupes_left,</span>
<span id="cb13-16">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Remaining duplicate candidates after de-duplication"</span>)</span>
<span id="cb13-17">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No duplicate candidates remain after de-duplication.</code></pre>
</div>
</div>
<p>As the result shows, we have elimintated the duplicated book titles/rows.</p>
</section>
</section>
<section id="merge-calendar-and-goodreads-datasets" class="level2">
<h2 class="anchored" data-anchor-id="merge-calendar-and-goodreads-datasets">Merge Calendar and Goodreads Datasets</h2>
<section id="match-calendar-book-names-to-goodreads-titles" class="level3">
<h3 class="anchored" data-anchor-id="match-calendar-book-names-to-goodreads-titles">Match calendar book names to Goodreads titles</h3>
<p>Now we’re ready for the key step: <strong>link the calendar reading logs to the Goodreads library</strong>.</p>
<p>Because calendar book names are manually typed, I recommend, when you create the book list in Shortcuts, keeping them as close as possible to the titles in Goodreads. However, Goodreads book titles can be long, including information like series and edition notes. So, I’m using a function to do the matching with the following rule:</p>
<p>If the <strong>cleaned calendar title</strong> is contained in the <strong>cleaned Goodreads title</strong>, treat it as a match candidate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">find_match_candidates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(calendar_df, gr) {</span>
<span id="cb15-2">  calendar_titles <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(summary) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(summary), summary <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transmute</span>(</span>
<span id="cb15-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_title =</span> summary,</span>
<span id="cb15-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_clean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_title</span>(calendar_title)</span>
<span id="cb15-8">    )</span>
<span id="cb15-9"></span>
<span id="cb15-10">  candidates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_titles <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-11">    tidyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossing</span>(</span>
<span id="cb15-12">      gr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(book_id, title, author, title_clean)</span>
<span id="cb15-13">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(title_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fixed</span>(calendar_clean))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(calendar_title, title)</span>
<span id="cb15-16"></span>
<span id="cb15-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_titles =</span> calendar_titles, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">candidates =</span> candidates)</span>
<span id="cb15-18">}</span></code></pre></div>
</div>
<p>Then, we use the following process to review the matches and/or mismatches.</p>
<ul>
<li>If there is <strong>exactly 1 match</strong>, we can auto-link it.</li>
<li>If there are <strong>0 matches</strong>, the calendar title likely needs to be edited (or mapped manually).</li>
<li>If there are <strong>multiple matches</strong>, it usually means the calendar title is <strong>too generic</strong> (e.g., a short substring that appears in more than one Goodreads title) <em>or</em> your Goodreads library still has multiple editions. In practice, if you keep your calendar title reasonably specific (and you’ve removed duplicates), this should rarely happen — but we’ll still handle it gracefully.</li>
</ul>
<div class="scroll-container" style="overflow-x: scroll;white-space: nowrap;">
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">build_title_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(calendar_df, gr) {</span>
<span id="cb16-2">  out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find_match_candidates</span>(calendar_df, gr)</span>
<span id="cb16-3">  calendar_titles <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>calendar_titles</span>
<span id="cb16-4">  candidates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>candidates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb16-6">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Simple tie-breakers (still easy to explain):</span></span>
<span id="cb16-7">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1) Exact match after cleaning</span></span>
<span id="cb16-8">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2) Starts-with match</span></span>
<span id="cb16-9">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3) Otherwise, contains match</span></span>
<span id="cb16-10">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">match_rank =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb16-11">        title_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> calendar_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>L,</span>
<span id="cb16-12">        stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_starts</span>(title_clean, calendar_clean) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>L,</span>
<span id="cb16-13">        <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>L</span>
<span id="cb16-14">      ),</span>
<span id="cb16-15">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prefer the Goodreads title that is closest in length to the calendar title</span></span>
<span id="cb16-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extra_chars =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(title_clean) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(calendar_clean)</span>
<span id="cb16-17">    )</span>
<span id="cb16-18"></span>
<span id="cb16-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># For each calendar title, figure out whether there is a single “best” match</span></span>
<span id="cb16-20">  best_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> candidates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(calendar_title) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb16-23">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_candidates =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb16-24">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">best_rank =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(match_rank),</span>
<span id="cb16-25">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">best_extra =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(extra_chars[match_rank <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(match_rank)]),</span>
<span id="cb16-26">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_best =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(match_rank <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> best_rank <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> extra_chars <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> best_extra),</span>
<span id="cb16-27">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">candidate_list =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(book_id, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" | "</span>, title, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" ; "</span>),</span>
<span id="cb16-28">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span></span>
<span id="cb16-29">    )</span>
<span id="cb16-30"></span>
<span id="cb16-31">  coverage <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_titles <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(best_summary, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"calendar_title"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-33">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb16-34">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_candidates =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coalesce</span>(n_candidates, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>L),</span>
<span id="cb16-35">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_best =</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coalesce</span>(n_best, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>L),</span>
<span id="cb16-36">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb16-37">        n_candidates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no match (edit calendar title OR map manually)"</span>,</span>
<span id="cb16-38">        n_best <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto-match"</span>,</span>
<span id="cb16-39">        <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"multiple matches (calendar title too generic OR multiple editions — review)"</span></span>
<span id="cb16-40">      )</span>
<span id="cb16-41">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-42">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(n_candidates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(status <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto-match"</span>), calendar_title)</span>
<span id="cb16-43"></span>
<span id="cb16-44">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-map only when there is exactly one best match</span></span>
<span id="cb16-45">  auto_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> candidates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-46">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(</span>
<span id="cb16-47">      best_summary <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n_best <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-48">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(calendar_title, best_rank, best_extra),</span>
<span id="cb16-49">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"calendar_title"</span></span>
<span id="cb16-50">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-51">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(match_rank <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> best_rank, extra_chars <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> best_extra) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-52">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(calendar_title, match_rank, extra_chars, book_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-53">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transmute</span>(</span>
<span id="cb16-54">      calendar_title,</span>
<span id="cb16-55">      book_id,</span>
<span id="cb16-56">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">goodreads_title =</span> title,</span>
<span id="cb16-57">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">match_method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"contained-in (ranked)"</span></span>
<span id="cb16-58">    )</span>
<span id="cb16-59"></span>
<span id="cb16-60">  manual_map_template <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coverage <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-61">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(status <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto-match"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-62">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transmute</span>(</span>
<span id="cb16-63">      calendar_title,</span>
<span id="cb16-64">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">book_id =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA_integer_</span>,</span>
<span id="cb16-65">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">goodreads_title =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA_character_</span>,</span>
<span id="cb16-66">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">match_method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"manual"</span>,</span>
<span id="cb16-67">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">note =</span> status</span>
<span id="cb16-68">    )</span>
<span id="cb16-69"></span>
<span id="cb16-70">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb16-71">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">coverage =</span> coverage,</span>
<span id="cb16-72">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">candidates =</span> candidates,</span>
<span id="cb16-73">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auto_map =</span> auto_map,</span>
<span id="cb16-74">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">manual_map_template =</span> manual_map_template</span>
<span id="cb16-75">  )</span>
<span id="cb16-76">}</span>
<span id="cb16-77"></span>
<span id="cb16-78">match_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build_title_map</span>(calendar_df, goodreads_dedup)</span>
<span id="cb16-79"></span>
<span id="cb16-80">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(match_out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coverage)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 40%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">calendar_title</th>
<th style="text-align: left;">calendar_clean</th>
<th style="text-align: right;">n_candidates</th>
<th style="text-align: right;">best_rank</th>
<th style="text-align: right;">best_extra</th>
<th style="text-align: right;">n_best</th>
<th style="text-align: left;">candidate_list</th>
<th style="text-align: left;">status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Guns, Germs, and Steel</td>
<td style="text-align: left;">guns germs and steel</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">900007 | Guns, Germs, and Steel: The Fates of Human Societies</td>
<td style="text-align: left;">auto-match</td>
</tr>
<tr class="even">
<td style="text-align: left;">Project Hail Mary</td>
<td style="text-align: left;">project hail mary</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">900004 | Project Hail Mary (Hardcover)</td>
<td style="text-align: left;">auto-match</td>
</tr>
<tr class="odd">
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">the kite runner</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">900002 | The Kite Runner</td>
<td style="text-align: left;">auto-match</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">the secret history</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">900006 | The Secret History (Vintage Classics)</td>
<td style="text-align: left;">auto-match</td>
</tr>
<tr class="odd">
<td style="text-align: left;">The Story of A New Name</td>
<td style="text-align: left;">the story of a new name</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">900001 | The Story of a New Name (Neapolitan Novels, #2)</td>
<td style="text-align: left;">auto-match</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>If anything shows up as “no match” or “multiple matches”, we’ll manually specify the mapping. This is also a nice place to show the audience that:</p>
<ul>
<li>sometimes it’s easiest to <strong>edit the Shortcut book name</strong></li>
<li>sometimes you just create a tiny mapping table like this</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Anything not "auto-match" needs human attention</span></span>
<span id="cb17-2">needs_manual <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> match_out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coverage <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-3">  dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(status <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto-match"</span>)</span>
<span id="cb17-4"></span>
<span id="cb17-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(needs_manual) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb17-6">  title_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> match_out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>auto_map</span>
<span id="cb17-7"></span>
<span id="cb17-8">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb17-9"></span>
<span id="cb17-10">  knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(needs_manual, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Titles that need manual review"</span>)</span>
<span id="cb17-11"></span>
<span id="cb17-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># --- Manual mapping table (fill in ONLY if needed) ---</span></span>
<span id="cb17-13">  manual_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tibble<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb17-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calendar_title  = c("..."),</span></span>
<span id="cb17-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># book_id         = c(900001),</span></span>
<span id="cb17-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># goodreads_title = c("..."),</span></span>
<span id="cb17-17">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># match_method    = c("manual")</span></span>
<span id="cb17-18">  )</span>
<span id="cb17-19"></span>
<span id="cb17-20">  title_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(</span>
<span id="cb17-21">    match_out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>auto_map,</span>
<span id="cb17-22">    manual_map</span>
<span id="cb17-23">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-24">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(calendar_title, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.keep_all =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb17-25"></span>
<span id="cb17-26">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Optional: warn if you still have gaps after manual mapping</span></span>
<span id="cb17-27">  still_unmapped <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anti_join</span>(</span>
<span id="cb17-28">    match_out<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coverage <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(calendar_title),</span>
<span id="cb17-29">    title_map <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(calendar_title),</span>
<span id="cb17-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"calendar_title"</span></span>
<span id="cb17-31">  )</span>
<span id="cb17-32"></span>
<span id="cb17-33">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(still_unmapped) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb17-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> These calendar titles are still not mapped (add them to manual_map or fix the Shortcut title):</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb17-35">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(still_unmapped<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>calendar_title)</span>
<span id="cb17-36">  }</span>
<span id="cb17-37">}</span>
<span id="cb17-38"></span>
<span id="cb17-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Always show the final mapping table used for merging</span></span>
<span id="cb17-40">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(title_map, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Final Title Mapping (calendar → Goodreads)"</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Final Title Mapping (calendar → Goodreads)</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 7%">
<col style="width: 49%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">calendar_title</th>
<th style="text-align: right;">book_id</th>
<th style="text-align: left;">goodreads_title</th>
<th style="text-align: left;">match_method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Guns, Germs, and Steel</td>
<td style="text-align: right;">900007</td>
<td style="text-align: left;">Guns, Germs, and Steel: The Fates of Human Societies</td>
<td style="text-align: left;">contained-in (ranked)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Project Hail Mary</td>
<td style="text-align: right;">900004</td>
<td style="text-align: left;">Project Hail Mary (Hardcover)</td>
<td style="text-align: left;">contained-in (ranked)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: right;">900002</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">contained-in (ranked)</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Secret History</td>
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">contained-in (ranked)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">The Story of A New Name</td>
<td style="text-align: right;">900001</td>
<td style="text-align: left;">The Story of a New Name (Neapolitan Novels, #2)</td>
<td style="text-align: left;">contained-in (ranked)</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="merge-the-calendar-and-goodreads-datasets" class="level3">
<h3 class="anchored" data-anchor-id="merge-the-calendar-and-goodreads-datasets">Merge the Calendar and Goodreads datasets</h3>
<p>Now we can attach Goodreads metadata to each calendar reading session, and I’ll call the merged dataset <code>reading_df</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">calendar_matched <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(</span>
<span id="cb18-3">    title_map <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(calendar_title, book_id),</span>
<span id="cb18-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"summary"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"calendar_title"</span>)</span>
<span id="cb18-5">  )</span>
<span id="cb18-6"></span>
<span id="cb18-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Keep only sessions that successfully matched a Goodreads book</span></span>
<span id="cb18-8">calendar_matched <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_matched <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(book_id))</span>
<span id="cb18-10"></span>
<span id="cb18-11">reading_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> calendar_matched <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(</span>
<span id="cb18-13">    goodreads_dedup,</span>
<span id="cb18-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"book_id"</span></span>
<span id="cb18-15">  )</span></code></pre></div>
</div>
<p>Let’s take a peek into the datasets</p>
<div class="scroll-container" style="overflow-x: scroll;white-space: nowrap;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">reading_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-3">  knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 8%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">summary</th>
<th style="text-align: left;">start</th>
<th style="text-align: left;">end</th>
<th style="text-align: left;">description</th>
<th style="text-align: left;">last.modified</th>
<th style="text-align: left;">status</th>
<th style="text-align: right;">book_id</th>
<th style="text-align: left;">title</th>
<th style="text-align: left;">author</th>
<th style="text-align: left;">author_l_f</th>
<th style="text-align: left;">additional_authors</th>
<th style="text-align: left;">isbn</th>
<th style="text-align: left;">isbn13</th>
<th style="text-align: right;">my_rating</th>
<th style="text-align: right;">average_rating</th>
<th style="text-align: left;">publisher</th>
<th style="text-align: left;">binding</th>
<th style="text-align: right;">number_of_pages</th>
<th style="text-align: right;">year_published</th>
<th style="text-align: right;">original_publication_year</th>
<th style="text-align: left;">date_read</th>
<th style="text-align: left;">date_added</th>
<th style="text-align: left;">bookshelves</th>
<th style="text-align: left;">bookshelves_with_positions</th>
<th style="text-align: left;">exclusive_shelf</th>
<th style="text-align: left;">my_review</th>
<th style="text-align: left;">spoiler</th>
<th style="text-align: left;">private_notes</th>
<th style="text-align: right;">read_count</th>
<th style="text-align: right;">owned_copies</th>
<th style="text-align: left;">title_clean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">9C8E9A43-EDEF-D832-7083-4A23A1628CD3</td>
<td style="text-align: left;">Project Hail Mary</td>
<td style="text-align: left;">2025-01-01 08:05:27</td>
<td style="text-align: left;">2025-01-01 08:23:27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 08:27:03</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900004</td>
<td style="text-align: left;">Project Hail Mary (Hardcover)</td>
<td style="text-align: left;">Andy Weir</td>
<td style="text-align: left;">Weir, Andy</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0593135202”</td>
<td style="text-align: left;">=“9780593135204”</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.51</td>
<td style="text-align: left;">Ballantine Books</td>
<td style="text-align: left;">Hardcover</td>
<td style="text-align: right;">496</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">2021</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-20</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">currently-reading</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">project hail mary</td>
</tr>
<tr class="even">
<td style="text-align: left;">C3122372-3996-DC8D-C0AC-A2DB79FBA943</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-01 18:05:11</td>
<td style="text-align: left;">2025-01-01 19:44:11</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 19:49:19</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">Tartt, Donna</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“1400031702”</td>
<td style="text-align: left;">=“9781400031702”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: left;">Vintage</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">1992</td>
<td style="text-align: left;">2025-01-03</td>
<td style="text-align: left;">2024-12-15</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the secret history</td>
</tr>
<tr class="odd">
<td style="text-align: left;">695A52D8-00B3-7D86-FF46-CD81A8F2095C</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">2025-01-01 19:44:49</td>
<td style="text-align: left;">2025-01-01 20:20:49</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-01 20:27:12</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900002</td>
<td style="text-align: left;">The Kite Runner</td>
<td style="text-align: left;">Khaled Hosseini</td>
<td style="text-align: left;">Hosseini, Khaled</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“159463193X”</td>
<td style="text-align: left;">=“9781594631931”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.32</td>
<td style="text-align: left;">Riverhead Books</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">371</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">2003</td>
<td style="text-align: left;">2025-07-10</td>
<td style="text-align: left;">2024-12-29</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the kite runner</td>
</tr>
<tr class="even">
<td style="text-align: left;">4AFA90C7-C9D4-754D-A4FD-B8F1C3CA23AB</td>
<td style="text-align: left;">Guns, Germs, and Steel</td>
<td style="text-align: left;">2025-01-02 01:53:42</td>
<td style="text-align: left;">2025-01-02 03:21:42</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-02 03:24:40</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900007</td>
<td style="text-align: left;">Guns, Germs, and Steel: The Fates of Human Societies</td>
<td style="text-align: left;">Jared Diamond</td>
<td style="text-align: left;">Diamond, Jared</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“0393317552”</td>
<td style="text-align: left;">=“9780393317558”</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: left;">W. W. Norton &amp; Company</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">528</td>
<td style="text-align: right;">1997</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">2025-11-20</td>
<td style="text-align: left;">2022-10-01</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">guns germs and steel the fates of human societies</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C490962D-97B1-59E4-7BE9-50B6C8DB16FB</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-02 16:33:35</td>
<td style="text-align: left;">2025-01-02 17:58:35</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-02 18:00:58</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">Tartt, Donna</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“1400031702”</td>
<td style="text-align: left;">=“9781400031702”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: left;">Vintage</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">1992</td>
<td style="text-align: left;">2025-01-03</td>
<td style="text-align: left;">2024-12-15</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the secret history</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADA0D938-47D5-A425-7F70-B977B7486DEE</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-03 22:11:44</td>
<td style="text-align: left;">2025-01-03 22:29:44</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-03 22:34:22</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">Tartt, Donna</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“1400031702”</td>
<td style="text-align: left;">=“9781400031702”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: left;">Vintage</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">1992</td>
<td style="text-align: left;">2025-01-03</td>
<td style="text-align: left;">2024-12-15</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the secret history</td>
</tr>
<tr class="odd">
<td style="text-align: left;">010627B9-8BE5-3E1C-661B-E22B65DEDBB8</td>
<td style="text-align: left;">The Story of A New Name</td>
<td style="text-align: left;">2025-01-04 03:00:54</td>
<td style="text-align: left;">2025-01-04 03:38:54</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-04 03:43:38</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900001</td>
<td style="text-align: left;">The Story of a New Name (Neapolitan Novels, #2)</td>
<td style="text-align: left;">Elena Ferrante</td>
<td style="text-align: left;">Ferrante, Elena</td>
<td style="text-align: left;">Ann Goldstein</td>
<td style="text-align: left;">=“1609450786”</td>
<td style="text-align: left;">=“9781609450786”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.46</td>
<td style="text-align: left;">Europa Editions</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">471</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">2012</td>
<td style="text-align: left;">2025-02-18</td>
<td style="text-align: left;">2024-12-30</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the story of a new name</td>
</tr>
<tr class="even">
<td style="text-align: left;">032626A0-2265-D055-D033-78363E96CEDF</td>
<td style="text-align: left;">The Secret History</td>
<td style="text-align: left;">2025-01-14 21:38:01</td>
<td style="text-align: left;">2025-01-14 22:19:01</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2025-01-14 22:22:14</td>
<td style="text-align: left;">CONFIRMED</td>
<td style="text-align: right;">900006</td>
<td style="text-align: left;">The Secret History (Vintage Classics)</td>
<td style="text-align: left;">Donna Tartt</td>
<td style="text-align: left;">Tartt, Donna</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">=“1400031702”</td>
<td style="text-align: left;">=“9781400031702”</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: left;">Vintage</td>
<td style="text-align: left;">Paperback</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">1992</td>
<td style="text-align: left;">2025-01-03</td>
<td style="text-align: left;">2024-12-15</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">read</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">the secret history</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="filter-dataset-by-time-window-month-quarter-year" class="level2">
<h2 class="anchored" data-anchor-id="filter-dataset-by-time-window-month-quarter-year">Filter Dataset by Time Window (Month / Quarter / Year)</h2>
<p>Because my sample calendar dataset only includes reading sessions from 2025, filtering to “this year” is straightforward.</p>
<p>In a real setup, though, you’ll likely have multiple years of logs—and you might want to zoom in on a narrower window, like March 2025 or a specific quarter.</p>
<p>Below, I use a small helper function to make period-based filtering (monthly, quarterly, yearly) simple and reusable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">make_period_sessions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(start_date, end_date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) {</span>
<span id="cb20-2"></span>
<span id="cb20-3">  sessions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> reading_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb20-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb20-5">      start <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXct</span>(start_date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tz =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/New_York"</span>),</span>
<span id="cb20-6">      start <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXct</span>(end_date,   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tz =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/New_York"</span>)</span>
<span id="cb20-7">    )</span>
<span id="cb20-8"></span>
<span id="cb20-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sessions =</span> sessions)</span>
<span id="cb20-10">}</span></code></pre></div>
</div>
<section id="pick-a-month" class="level3">
<h3 class="anchored" data-anchor-id="pick-a-month">Pick a month</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">month_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_period_sessions</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2025-03-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2025-04-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"March 2025"</span>)</span></code></pre></div>
</div>
</section>
<section id="pick-a-quarter" class="level3">
<h3 class="anchored" data-anchor-id="pick-a-quarter">Pick a quarter</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">quarter_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_period_sessions</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2025-04-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2025-07-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Q2 2025"</span>)</span></code></pre></div>
</div>
</section>
<section id="pick-a-year" class="level3">
<h3 class="anchored" data-anchor-id="pick-a-year">Pick a year</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">year_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_period_sessions</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2025-01-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2026-01-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year 2025"</span>)</span></code></pre></div>
</div>
</section>
</section>
<section id="reflections" class="level2">
<h2 class="anchored" data-anchor-id="reflections">Reflections</h2>
<p>First, Goodreads lets me retrieve plenty of information about my library—titles, authors, shelves/status, ratings, and dates. But the usefulness of that export depends on how consistently I keep it up to date. If I don’t regularly mark books as read or currently-reading, or if I rarely add ratings, the export ends up being mostly book metadata with limited insight into my actual reading experience.</p>
<p>Second, Goodreads still misses a few pieces that I personally care about. It doesn’t include reading progress (like percentage or pages) in the export—even though you can enter progress while reading. Also, there isn’t a “genre” field. As I looked into this, I realized a book can be labeled with many genres on Goodreads, which makes genre harder to use consistently in analysis, even if it’s available in the export.</p>
<p>In comparison, my tracker’s data (the Calendar data) is much smaller and more manageable. My goal is to keep this tracker clean and easy to maintain, so that when I get to the analysis step later, I’m working with data that’s straightforward to filter, summarize and link to the Goodreads data.</p>
<hr>
<p>
This work is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC" style="max-width: 1em;max-height:1em;margin-left: .2em;"> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="BY" style="max-width: 1em;max-height:1em;margin-left: .2em;"> <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt="SA" style="max-width: 1em;max-height:1em;margin-left: .2em;">
</p>


</section>

 ]]></description>
  <category>reading</category>
  <category>tracking</category>
  <category>shortcuts</category>
  <category>calendar</category>
  <category>r</category>
  <category>rmarkdown</category>
  <guid>https://yingu6.github.io/KindlyMeasured/posts/ReadingTracker2.html</guid>
  <pubDate>Wed, 31 Dec 2025 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Kindly Measured Reading [1/3]: The Reading Time Tracker</title>
  <link>https://yingu6.github.io/KindlyMeasured/posts/ReadingTracker1.html</link>
  <description><![CDATA[ 





<p>I’ve been using a Kindle for reading and Goodreads for reviews and logging. But neither gives me the kind of session-level data (or metadata) I want to understand my reading habits over time.</p>
<p>What I really wanted was a simple tracker that could capture:</p>
<ul>
<li>the date and time of each reading session</li>
<li>the title of the book I read during that session</li>
</ul>
<p>After looking into what was already available, I found that popular reading tracker apps (like Bookly and Bookmory) still didn’t fully meet my needs—both in design and in how accessible the data was—unless I paid for a subscription. And since the data I wanted felt fairly minimal, I started wondering: could I build something lightweight that stays local and gives me full control?</p>
<p>After talking it through with ChatGPT, I decided to try a route that’s already built into the Apple ecosystem: <strong>Shortcuts</strong>, which works across iPhone and Apple Watch.</p>
<p>This post documents the path I took—complete with a few zigzags—the setup that <em>actually stuck</em>, and the reflections I had along the way.</p>
<section id="what-i-wanted-constraints-first" class="level2">
<h2 class="anchored" data-anchor-id="what-i-wanted-constraints-first">What I wanted (constraints first)</h2>
<p>My original idea was simple, but the constraints became clearer (and more realistic) as I built and tested the workflow:<br>
- <strong>Quick logging from Apple Watch + iPhone</strong> (ideally Watch-first, since I often don’t have my phone nearby while reading—this turned out to be a major constraint early on)<br>
- <strong>Start/end timestamps</strong>, so I can calculate duration later<br>
- <strong>A book title logged into each session</strong><br>
- <strong>Data that’s easy to export and analyze in R/RMarkdown</strong><br>
- <strong>Low maintenance</strong>: minimal typing, minimal file management (I don’t want tracking to add friction to a hobby)<br>
- <strong>Reusable/replicable</strong>: I realized the same approach could later track other hobbies too (like drawing), not just reading</p>
</section>
<section id="attempt-1-shortcuts-notes-works-but-messy" class="level2">
<h2 class="anchored" data-anchor-id="attempt-1-shortcuts-notes-works-but-messy">Attempt 1: Shortcuts + Notes (works, but messy)</h2>
<p>My first <a href="https://www.icloud.com/shortcuts/d24beb697f5845ae8344ca21f70a261a">prototype</a> used <strong>Shortcuts</strong> to append reading logs into <strong>Apple Notes</strong>. It worked, but Notes has an important limitation in this context: each appended value becomes its own line. That means a single session quickly turns into multiple lines—book title, start time, stop time, plus separators to keep the log readable (and editable if I logged something wrong).</p>
<p>Below is what the raw data looked like after a few iterations:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Book: The Story of a New Name
Start at
2025-12-29T18:28:27-05:00
Stop at
2025-12-29T18:28:30-05:00
------
Book: Kite Runner
Start at
2025-12-29T18:39:24-05:00
Stop at
2025-12-29T18:39:29-05:00
------
Book: The Story of a New Name
Start at
2025-12-29T19:28:27-05:00
Stop at
2025-12-29T19:28:30-05:00
------</code></pre>
</div>
</div>
<p>From a data perspective, this wasn’t <em>too</em> bad. If I logged one reading session per day, I’d end up with roughly 365 × 6 = 2,190 lines by the end of the year. In theory, I could copy the note into R and run a parsing script built around this structure.</p>
<p>Still, my data instincts kept nagging at me: <em>this can’t be the best way.</em> The format felt not only rudimentary but also fragile—easy to break if I ever tweaked the wording, missed a line, or wanted to add one more field later.</p>
<p>So I kept digging and tried another approach.</p>
</section>
<section id="attempt-2-shortcuts-numbersexcel-not-working-on-apple-watch" class="level2">
<h2 class="anchored" data-anchor-id="attempt-2-shortcuts-numbersexcel-not-working-on-apple-watch">Attempt 2: Shortcuts + Numbers/Excel (not working on Apple Watch)</h2>
<p>Next I tried a more “structured data” approach. I found a <a href="https://www.reddit.com/r/shortcuts/comments/1dnxtqe/work_time_tracking_using_automation_on_shortcuts/">Reddit post</a> that shared a <a href="https://www.icloud.com/shortcuts/0c47d79424034eb3b421dfe07f5f264b">work time-tracking workflow</a> built with Shortcuts, which logs entries directly into a spreadsheet. I used that idea as a starting point and adapted it for reading.</p>
<p>Its main difference from the Notes prototype is that <strong>Numbers becomes the database</strong>. Instead of writing raw text that I’d need to parse later, each session becomes a row in a spreadsheet—already structured, readable, and editable.</p>
<p>I was able to quickly modify the shortcut to fit my needs. Here is the updated <a href="https://www.icloud.com/shortcuts/49a3d5b36b3a4e769d6e2d46db1db234">shortcut</a>. In the <a href="files/Reading Track.numbers">Numbers file</a>, I used three sheets to collect raw inputs and then clean the data:<br>
- <strong>Start</strong>: logs the book title + start timestamp<br>
- <strong>End</strong>: logs the stop timestamp<br>
- <strong>Time Tracking</strong>: uses formulas to join the two logs, cleans up the fields, and calculates duration per session.</p>
<section id="why-this-was-appealing" class="level3">
<h3 class="anchored" data-anchor-id="why-this-was-appealing">Why this was appealing</h3>
<ul>
<li>The data was immediately tidy: rows and columns, no parsing required.</li>
<li>It was easy to review and correct mistakes.</li>
<li>In theory, I could even do lightweight summaries inside Numbers.</li>
</ul>
</section>
<section id="why-i-didnt-stick-with-it" class="level3">
<h3 class="anchored" data-anchor-id="why-i-didnt-stick-with-it">Why I didn’t stick with it</h3>
<p>This approach mostly worked—but it failed one of my core constraints. - <strong>Too much friction on the phone.</strong> Every time I ran the shortcut, Numbers popped open on my iPhone, and I had to manually close it. These two steps are rather redundant. - <strong>Dealbreaker: it doesn’t work on Apple Watch.</strong> Numbers isn’t available on Apple Watch, so the shortcut can’t run there. And since I often read without my phone nearby, Watch-first logging wasn’t optional for me.</p>
<p>At this point, I was tempted to fall back to the Notes method—until I found a better alternative.</p>
</section>
</section>
<section id="final-approach-shortcuts-calendar-finally-works" class="level2">
<h2 class="anchored" data-anchor-id="final-approach-shortcuts-calendar-finally-works">Final Approach: Shortcuts + Calendar (finally works!)</h2>
<p>While browsing more time-tracking workflows on Reddit, I came across an idea I hadn’t seriously considered: <strong>tracking time by creating Calendar events</strong>. My first reaction was that it felt like an unnecessary extra system. But when I was describing my experiments to my husband, it finally clicked—Calendar could <em>be</em> the database. I already use it extensively, it’s available on Apple Watch, and it stores start/end timestamps natively. Better yet, I could export everything later and analyze it in R.</p>
<p>This ended up being the simplest solution—while also offers much more than I expected.</p>
<section id="how-it-works" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works">How it works</h3>
<p>At a high level, this <a href="https://www.icloud.com/shortcuts/293b167ed3524085ad5915aa1d65d949">shortcut</a> does three things:</p>
<ul>
<li><strong>Stores a book list</strong> inside the shortcut (so I can select a title quickly without typing)</li>
<li><strong>On “Start”</strong>, saves the start timestamp to a small <code>.txt</code> file (stored in the Shortcuts folder on iCloud)</li>
<li><strong>On “Stop”</strong>, creates a Calendar event using:
<ul>
<li><strong>Event title:</strong> the selected book title<br>
</li>
<li><strong>Start time:</strong> retrieved from the saved <code>.txt</code> file<br>
</li>
<li><strong>End time:</strong> the current time when I stop the shortcut</li>
</ul></li>
</ul>
</section>
<section id="why-it-works-surprisingly-well" class="level3">
<h3 class="anchored" data-anchor-id="why-it-works-surprisingly-well">Why it works surprisingly well</h3>
<ul>
<li>Calendar events already contain the two key fields I need: start and end</li>
<li>It’s easy to attach metadata like book title through Shortcuts</li>
<li>Reviewing and correcting sessions is simple—each session is just an editable event in the Calendar</li>
<li>Calendar sync is automatic across devices, including <strong>Apple Watch</strong> (a major constraint solved)</li>
<li>Exporting to <code>.ics</code> is standard and reliable; R has dedicated package to retrieve data from <code>.ics</code></li>
<li>A dedicated calendar keeps the dataset clean (no mixing with real appointments)</li>
<li>The same approach can be reused for other activities and hobbies (like drawing) with almost no changes</li>
</ul>
<p>What I like most is that it fits naturally into how I already use Calendar. I’m not trying to quantify reading habit as a tool for self-discipline. Instead, I’m more interested in seeing <em>how</em> reading shows up in my life—-when it happens, how consistent or inconsistent it is, and how my reading time spreads across different books and genres. Having sessions appear on my calendar makes reading time more visible, and it gives me a gentle, non-rigid way to notice patterns over time–patterns that will likely help me understand myself a little better in the future.</p>
</section>
</section>
<section id="reflections" class="level2">
<h2 class="anchored" data-anchor-id="reflections">Reflections</h2>
<p>I will talk about the data export from Calendar and analysis in R in details in the next post. Here, I want to pause and share a few reflections from the process itself – what surprised me, what helped, and what I’d do again.</p>
<section id="shorcuts-learning-curve" class="level3">
<h3 class="anchored" data-anchor-id="shorcuts-learning-curve">Shorcuts learning curve</h3>
<p>Initially, I went back and forth on whether I should use existing tools to build this time-tracking workflow or take the more ambitious route and try to build an app. The app idea might sound unrealistic for someone without a software engineering background, but I’ve always liked learning new things, and this felt like a good excuse/motive to try. With today’s AI coding tools, the question isn’t really <em>whether</em> it’s possible, but how much time I’d be willing to invest.</p>
<p>In the end, I chose the first route—using Shortcuts—because I wanted the process to be relatively quick and less demanding. If the project took too long, it would start stealing time from the very thing I was trying to support: reading. Shortcuts felt like a good middle ground: versatile enough to make life easier, but lightweight enough to keep the effort proportional to the goal. I’m still interested in building a small app one day—just not for this project, and not right now.</p>
<p>At work, I’ve built quite a few automated workflows using tools like Power Automate, AppleScript, and R. So when I first started exploring Shortcuts, I didn’t expect much of a learning curve. I assumed I could follow a set of steps and get a working shortcut quickly.</p>
<p>That confidence didn’t last long.</p>
<p>My first attempt failed pretty dramatically, and it took me at least two hours to accept that I needed to step back and look at real examples before I could build something reliable. In hindsight, the learning curve makes sense. It came from a few places:</p>
<ul>
<li><strong>The action vocabulary is its own world.</strong> Shortcuts has a specific set of building blocks, and you only get fluent by learning what exists (and what doesn’t).</li>
<li><strong>Each action has a narrow “shape.”</strong> Compared with tools like Power Automate (not a perfect comparison, but still), Shortcuts can feel more constrained in what each step can do—so you often need extra steps to get to the same result.</li>
<li><strong>The environment is different.</strong> I’m much more practiced at building automation on a laptop. Designing something that needs to run smoothly on an iPhone—and especially on an Apple Watch—forced me to think differently about interaction, input, and friction.</li>
</ul>
</section>
<section id="talking-through-an-idea-really-helps" class="level3">
<h3 class="anchored" data-anchor-id="talking-through-an-idea-really-helps">Talking through an idea really helps</h3>
<p>I still can’t believe the turning point came from a casual after-dinner conversation with my husband. I was explaining why my day felt rough—multiple failed Shortcut attempts—and what I had managed to achieve so far. I mentioned that I’d seen someone use Calendar as the “database” for time tracking. He asked a simple question: <em>how does that work?</em> And that question exposed a gap I hadn’t even noticed—I’d never really tested the Calendar option, and I wasn’t sure whether (or how) I could export all events from a dedicated calendar in a usable way.</p>
<p>That was the moment the solution clicked.</p>
<p>The turning point didn’t happen when I asked ChatGPT a hundred questions, and it didn’t happen when I collected more Shortcut examples. It happened when I tried to explain the problem out loud to another person.</p>
<p>This <strong>learning-by-teaching</strong> idea isn’t new—it’s a well-studied learning strategy. One related finding is the <strong>protégé effect</strong>: when learners expect to teach (or feel responsible for someone else’s learning), they often invest more effort and learn more deeply <span class="citation" data-cites="chase2009">(Chase et al., 2009)</span>. In classroom settings, a widely used cousin of this idea is <strong>Peer Instruction</strong>, an evidence-based approach with a large research base across STEM disciplines <span class="citation" data-cites="vickrey2015">(Vickrey et al., 2015)</span>. A closely related mechanism is <strong>self-explanation</strong>—putting your reasoning into words as you learn—which has also been shown to improve understanding even with minimal prompting <span class="citation" data-cites="chi1994">(Chi et al., 1994)</span>.</p>
<p>In other words, when you try to teach—or even just explain—your thinking, you’re forced to organize it, name the assumptions you’ve been making, and notice what you don’t actually understand yet. Often, the “aha” comes not from new information, but from restructuring what you already know.</p>
<p>On the other side of the story, my husband was being a really good listener. It reminded me of what good therapists often do: ask the right questions, hold the space, and help people arrive at their own answers.</p>
<hr>
<p>
This work is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC" style="max-width: 1em;max-height:1em;margin-left: .2em;"> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="BY" style="max-width: 1em;max-height:1em;margin-left: .2em;"> <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt="SA" style="max-width: 1em;max-height:1em;margin-left: .2em;">
</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2">
<div id="ref-chase2009" class="csl-entry">
Chase, C. C., Chin, D. B., Oppezzo, M. A., &amp; Schwartz, D. L. (2009). Teachable agents and the prot<span>é</span>g<span>é</span> effect: Increasing the effort towards learning. <em>Journal of Science Education and Technology</em>, <em>18</em>(4), 334–352. <a href="https://doi.org/10.1007/s10956-009-9180-4">https://doi.org/10.1007/s10956-009-9180-4</a>
</div>
<div id="ref-chi1994" class="csl-entry">
Chi, M. T. H., De Leeuw, N., Chiu, M.-H., &amp; Lavancher, C. (1994). Eliciting self-explanations improves understanding. <em>Cognitive Science</em>, <em>18</em>(3), 439–477. <a href="https://doi.org/10.1016/0364-0213(94)90016-7">https://doi.org/10.1016/0364-0213(94)90016-7</a>
</div>
<div id="ref-vickrey2015" class="csl-entry">
Vickrey, T., Rosploch, K., Rahmanian, R., Pilarz, M., &amp; Stains, M. (2015). Research-based implementation of peer instruction: A literature review. <em>CBE—Life Sciences Education</em>, <em>14</em>(1), es3. <a href="https://doi.org/10.1187/cbe.14-11-0198">https://doi.org/10.1187/cbe.14-11-0198</a>
</div>
</div></section></div> ]]></description>
  <category>reading</category>
  <category>tracking</category>
  <category>shortcuts</category>
  <category>calendar</category>
  <category>ios</category>
  <guid>https://yingu6.github.io/KindlyMeasured/posts/ReadingTracker1.html</guid>
  <pubDate>Tue, 30 Dec 2025 05:00:00 GMT</pubDate>
</item>
</channel>
</rss>
